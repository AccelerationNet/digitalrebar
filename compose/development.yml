
consul:
  extends:
    file: docker-compose-common.yml
    service: consul

#registrator:
#  extends:
#    file: docker-compose-common.yml
#    service: registrator
#  links:
#    - consul:consul

postgres:
  extends:
    file: docker-compose-common.yml
    service: postgres
  links:
    - consul:consul

webproxy:
  extends:
    file: docker-compose-common.yml
    service: webproxy
  links:
    - consul:consul
    - forwarder:forwarder

goiardi:
  extends:
    file: docker-compose-common.yml
    service: goiardi
  links:
    - consul:consul
    - postgres:database

rebar_api:
  extends:
    file: docker-compose-common.yml
    service: rebar_api
  links:
    - consul:consul
    - postgres:database
    - goiardi:goiardi
    - forwarder:forwarder

forwarder:
  extends:
    file: docker-compose-common.yml
    service: forwarder
  links:
    - consul:consul

node:
  extends:
    file: docker-compose-common.yml
    service: node
  links:
    - rebar_api:rebar_api
    - forwarder:forwarder
