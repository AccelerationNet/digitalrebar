---
- Name: 'test script template rule'
  Matchers:
    - Enabled: true
    - Eq: [ true ,true]
  MatchActions:
    - Script: |
        echo "Hello from {{.Evt.Node.UUID}} (AKA {{.Evt.Node.Name}})"
        echo "I an running because noderole {{.Evt.NodeRole.ID}} (for role {{.Evt.Role.Name}}) triggered {{.Evt.Selector.event}}"
    - Delay:
      - Duration: 30
      - Script: |
         echo "This should be delayed 30 seconds"
         env
      - Log: true
- Name: 'test logging rule'
  WantsAttribs:
    - disks
  Matchers:
    - Enabled: true
    - JSON: 
        Selector: ':root .Attribs .disks :has( .removable:val(false) )'
        SaveAs: 'harddisks'
    - Len:
        Var: harddisks
        SaveAs: driveCount
    - Gt: [ '$driveCount', 3 ]
  MatchActions:
    - Log: true
    - Script: |
       echo "System has {{.Vars.driveCount}} drives, which is more than the 3 we were looking for"
